<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hae5.sfaas.alerts.mapper.AlarmHistoryMapper">

    <insert id="save">
        INSERT INTO alarm_history (alarm_id, line_id, process_id, category_l3_id, occurrence_time, resolution_time,
                                   status, cause, action_taken)
        VALUES (#{alarmId}, #{lineId}, #{processId}, #{categoryL3Id}, #{occurrenceTime}, #{resolutionTime},
                #{status}, #{cause}, #{actionTaken});
    </insert>

    <delete id="deleteAll">
        DELETE FROM alarm_history;
    </delete>

    <select id="findAll" resultType="com.hae5.sfaas.alerts.model.AlarmHistory">
        SELECT ah.*
        FROM alarm_history as ah;
    </select>

    <select id="getNowYearTotalAlarmHistory" resultType="com.hae5.sfaas.alerts.model.AlarmHistory">
        SELECT ah.*
        FROM alarm_history as ah
        WHERE YEAR(ah.occurrence_time) = #{year};
    </select>
</mapper>